---
layout: post
title: "Run Leiningen project on IntelliJ IDEA with Cursive"
permalink: intellij-with-cursive
date: 2016-09-12
author: Ratul Minhaz
summary: Guide to setting up Leiningen projects on IntelliJ IDEA with Cursive
categories: Coding
tags:
  - Clojure
  - IDE
published: false
---

Although it's usually suggested not to use any IDE while learning a programming language, many of us are already habituated with using one. For a seasoned programmer ditching their favorite IDE to learn a new language is kind of absurd. So when I started learning [Clojure](https://clojure.org/), I couldn't make myself jump on the emacs/vim bandwagon right away. Instead I found [Cursive](https://cursive-ide.com), a plugin for [IntelliJ IDEA](https://www.jetbrains.com/idea/), the IDE that I have used for almost all my university life.

Installing Cursive was like a breeze. I followed their [userguide](https://cursive-ide.com/userguide/) and found Cursive exactly where they said it would be (Settings > Plugins > Browse repositories...) After install and reboot there were options for Leiningen, Clojure Application and Clojure REPL in the project creation wizard. As a beginner I was expecting something that I have already seen in many IDEs: you create a project, edit the default source code, then hit the "execute and run" button. Soon I realized this wasn't the case with Cursive.

Multiple Run/Debug configurations according to needs are quiet common. But with the Cursive plugin's three different sort of projects for Clojure, it's kind of confusing which one will work seemlessly with least effort. I scourged Cursive's usergide, found lots of docs So I spend half an hour to dabble with different configurations that

২০০৮ সালের কথা, বারাক ওবামা তখন প্রথম আমেরিকান প্রেসিডেন্সিয়াল নির্বাচনে দাঁড়িয়েছিলেন, প্রতিদ্বন্ধী ছিলেন মিট রম্নি। দুইজনেরই কাঁধে কাঁধে টক্কর লাগছিল আমেরিকার প্রতিটি স্টেটে। এমনই টানটান উত্তেজনার মাঝে ন্যাট সিলভার নামে এক পরিসংখ্যানবিদ ৫০টি স্টেটের জন্যই কে জিতবে তার ভবিষ্যতবাণী দিয়ে বসেন, তাও কত শতাংশ সম্ভাবনা কার জেতার সেটা সহ! নির্বাচনের ফলাফল প্রকাশ পাবার পর জানা গেল, তার ভবিষ্যতবাণী শুধু একটা স্টেটের জন্য ভুল হয়েছে, কারণ সেখানে ওবামা মাত্র ০.১% বেশি ভোট পেয়েছিলেন রম্নি থেকে!

দেশটার জনগণের মাঝে ন্যাটের এই ভবিষ্যতবাণীর প্রতিক্রিয়া ছিল দেখার মত। কেউ-ই বিশ্বাস করতে চাইছিল না সেদেশের কয়েক লেভেলের জটিল গণতান্ত্রিক নির্বাচন প্রক্রিয়ার ফল কেউ এতটা সহজে ভবিষ্যতবাণী করতে পারবেন। সবার মুখেই প্রশ্ন, কে এই ন্যাট সিলভার, কোন জাদুবলেই বা তিনি মাত্র ০.১% ত্রুটির মধ্যে বলে দিতে পারলেন নির্বাচনের ফল!

২০১২ সালে ন্যাট আবার আলোচনার বিষয়বস্তু হয়ে ফিরে আসলেন। ওবামা পুনরায় নির্বাচনে দাঁড়িয়েছেন এবং ন্যাট আগেরবারের মত শতাংশ সম্ভাবনা সমেত ভবিষ্যতবাণী দিয়ে দিয়েছেন আগেভাগেই। সবাই যা ভেবেছিল তা-ই হল, তার ভবিষ্যতবাণী সত্য হল। কিন্তু এবার ৫০টি স্টেটের সবগুলোর জন্যই সত্য হল তার কথা!

ন্যাটের কেচ্ছাকাহিনি শুনে মনে হতে পারে রূপকথার বই থেকে কোন জাদুকরের গল্প বলে যাচ্ছি, যার কি না আছে এক ভবিষ্যতবাণী দেয়া আয়না! আসলে ন্যাট যা করেছিলেন সেটা ডেটা সাইন্সের মোক্ষম ব্যবহার ছিল। তিনি ছিলেন এই ফিল্ডের প্রথম দিককার একজন পথিকৃত।


> নবীন ডেটা সাইন্স উৎসুকদের জন্য প্রাথমিক পোস্ট এটি।<br> স্রেফ পাইথনের হালকা ধারণা থাকলেই যথেষ্ট :)

__সুচিপত্র__

* TOC
{:toc}


### ডেটা সাইন্স?

উইকিপিডিয়াতে ডেটা সাইন্সের সঙ্গা পড়ে আপনার মাথা ঘুরিয়ে যেতেই পারে। কারণ ডেটা সাইন্স আসলেই বেশ জটিল একটা বিষয়। আগে চলুন একটা মজার ব্যাপার নিয়ে ভাবি: যার কাছে অনেক তথ্য আছে, সে-ই কি জ্ঞানী?

আমার স্পষ্ট মনে আছে আমার SSC পরীক্ষার সময়ের কথা: প্রতিটি সাবজেক্টের জন্য কমসে কম কয়েকশত টাকার MCQ test papers ফটোকপি-ই করেছিলাম। তখন বেশ বোকা-সোকা ছিলাম আমি। একবার হল কি, টেস্ট পেপারগুলোর সল্যুশান ঘাঁটতে গিয়ে আবিষ্কার করলাম বাংলা দ্বিতীয় পত্রের সল্যুশান পেপারের জন্য কোন কোয়েশ্চেন পেপারই নাই! সাথে সাথে মনটা খারাপ হয়ে গেল। এতগুলো উত্তর আছে আমার কাছে, এতগুলো মূল্যবান তথ্য, অথচ জানি-ই না এগুলোর মানে কি!

কয়েকদিন পর বাসার কাজের ছেলেটা এক গাদা কাগজ নিয়ে আসল আমার কাছে, কাঁচুমাচু হয়ে বলল এগুলো নাকি আমার টেবিল থেকে পড়ে গিয়েছিল এবং সে নিয়ে ফেলে দিয়েছিল ডাস্টবিনে। আমি খুলে দেখে প্রায় কেঁদে দিলাম, কারণ আমার সেই উত্তরপত্রগুলোর প্রশ্ন ছিল এই কাগজগুলো! পরীক্ষার আগে এই টেস্টপেপার্স সলভ করে বাংলা দ্বিতীয় পত্রের জ্ঞান নিয়ে শেষমেশ A- পেয়েছিলাম।

আসলে এসব কিছুই হয় নি। বাংলা দ্বিতীয় পত্রে A- পেয়েছিলাম ঠিকই, সেটা ভিন্ন কারণে। মূল কথা হল, আমার কাছে উত্তরপত্র মানে তথ্য থাকা স্বত্বেও আমি কোন কাজে ব্যবহার করতে পারিনি সেগুলো। যখনই প্রশ্নগুলো হাতে পেলাম কন্টেক্সট হিসাবে, তথ্যগুলো-ও ব্যবহারযোগ্য হয়ে উঠল আমার কাছে।

উত্তর পত্রটা ছিল আমার কাছে তথ্য বা ডেটা। কিন্তু সেটা জ্ঞান হিসাবে ব্যবহার করতে পারছিলাম না যতক্ষণ না পর্যন্ত আমার কাছে কন্টেক্সট হিসাবে প্রশ্ন পত্রগুলো ছিল। তাই ডেটা সাইন্স হল তথ্য থেকে জ্ঞান লাভ করার বিজ্ঞান। গাণিতিক তত্ব, সিগনাল প্রোসেসিং, সম্ভাব্যতা, মেশিন লার্নিং, কম্পিউটার প্রোগ্রামিং ইত্যাদি ফিল্ড থেকে নানারকমের টেকনিক ব্যবহার করে তথ্যকে বিশ্লেষণ করে কাজে লাগাবার মতন জ্ঞানে পরিণত করাই ডেটা সাইন্স। এর মানে দাঁড়াচ্ছে:

- তথ্য সংগ্রহ করা,
- সেগুলো প্রোগ্রামেটিক উপায়ে বিশ্লেষণ করা,
- বিশ্লেষণের ফল সহজবোদ্ধভাবে উপস্থাপন করা,

এবং কোন স্বিদ্ধান্তে আসা বা ভবিষ্যতের পূর্বাভাষ দেবার চেষ্টা করা। ডেটা সাইন্টিস্টের সংঙা হিসাবে আমার কাছে সবচেয়ে যুতসই লাগে এটা: যিনি আর দশজন সফটয়্যার নির্মাতার চেয়ে ভাল পরিসংখ্যান পারেন এবং যে কোন পরিসংখ্যানবিদের চেয়ে ভাল সফটয়্যার বানাতে পারেন, তিনি-ই ডেটা সাইন্টিস্ট!


### টিউটোরিয়ালটির লক্ষ্য

এই টিউটোরিয়ালে আমরা ছোট একটা প্রোজেক্ট করার মাধ্যমে ডেটা সাইন্সের ধাপগুলো: ডেটা কালেকশন, অ্যানালাইসিস এবং ভিজুয়ালাইজেশনের সাথে পরিচিত হব। ডেটা সংগ্রহ করব আমরা GitHub এর API ব্যবহার করে। সেখান থেকে কিছু ইউজারের অ্যাকাউন্টের বয়স এবং মোট তৈরী করা repository এর সংখ্যা নিব। তারপর পাইথনে কোড করে অ্যানালাইসিস করে বের করব অ্যাকাউন্ট তৈরীর পর কে সবচেয়ে বেশি সক্রিয় ছিল। সবশেষে ভিজুয়ালাইজেশন করব Plot.ly নামে একটা সাইট দিয়ে। প্রোজেক্ট শেষে আপনার এমন একটা গ্রাফ তৈরী করার অভিজ্ঞতা হবে:

<iframe width="700" height="600" frameborder="0" scrolling="no" src="https://plot.ly/~mnzr/14.embed"></iframe>

আপনি হয়ত আগে পাইথন ব্যবহার করেছেন, তাই ধরে নিচ্ছি আপনি স্রেফ পাইথনের সিনট্যাক্সের সাথে হালকা পাতলা পরিচিত। প্রস্তুতি পর্বে আমি বলব কিভাবে এ প্রোজেক্ট (এবং মোটামুটি সব পাইথন প্রোজেক্ট-ই) শুরু করতে হয়।


### পূর্বপ্রস্তুতি

সবার আগে অবশ্যই পাইথন থাকা চাই ইন্সটল করা আপনার ওয়ার্কস্টেশনে! এছাড়াও আনুসাঙ্গিক কিছু জিনিশ থাকলে কোডিং করা অনেক আরামের হয়ে যায়। এ প্রোজেক্টের জন্য আপনার লাগবে:

- পাইথন ৩
- [Virtualenv and virtualenvwrapper](http://docs.python-guide.org/en/latest/dev/virtualenvs/)
- Sublime Text 3 বা অন্য যে কোন কোডিং করার এডিটর।

এ প্রোজেক্টটি উবুন্টু ১৬.০৪ কে উদ্দেশ্য করে লেখা, কারণ আমার ওয়ার্কস্টেশনে আমি এটাই ব্যবহার করি। তাই স্বাভাবিকভাবেই প্রস্তুতি পর্বটা উবুন্টু-কেন্দ্রিক। উইন্ডোজে এসব টুলস কিভাবে ব্যবহার করা যায় তা গুগল করে দেখে নিতে পারেন।

__পাইথন ৩__<br>
পাইথন ৩ এসেছে বহুদিন হল। উবুন্টুতে এখন ডিফল্টভাবেই পাইথন ৩ ইন্সটল করা থাকে, সেটা পাওয়া যাবে টার্মিনালে `python3` কমান্ডটা লেখলে। এতে আপনি পাইথনের শেল পাবেন যেখানে যে কোন পাইথন কোড টেস্ট করে দেখতে পারবেন। আমি ব্যক্তিগতভাবে `ipython` ব্যবহার করি কারণ সেটার কোড কমপ্লিশন ফিচারটা আমার বেশ পছন্দের। `pip` দিয়ে সহজে ইন্সটল করে নিতে পারেন এটি।

__ভার্চুয়াল এনভায়ারনমেন্ট__<br>
আপনি হয়ত বা Flask 0.10 (একটি মাইক্রো ফ্রেমওয়ার্ক) ভার্শন ব্যবহার করে অভ্যস্ত, কিন্তু 0.11 ভার্শনটাও পরখ করে দেখতে চান। ইন্সটল করলেন দুটাই, তারপর কোডে গিয়ে লেখলেন `from flask import Flask`, কিন্তু এতে আসলে কোন ভার্শনটা ইম্পোর্ট হল? :( মাল্টিপল ভার্শনের এই দুঃখ দুর্দশা দুর করতেই ভার্চুয়াল এনভায়ারনমেন্টের আগমন। ব্যাপারটা খুবই সোজা সাপ্টা: কোন প্রোজেক্টের জন্য ভার্চুয়াল এনভায়ারনমেন্ট কমান্ড দিলে আপনার পিসিতে ইন্সটল করা পাইথন এবং সব মডিউলের একটা ফোল্ডারে ফটোকপি বানিয়ে নেবে। তারপর ওই প্রোজেক্টের জন্য যত যা মডিউল লাগে সব ওই ফটোকপি ফোল্ডারে ইন্সটল করবে। সেগুলো আবার ভার্চুয়াল এনভায়ারনমেন্টের বাইরে পাওয়া যাবে না! ব্যাপারটা এখন ঝামেলা মনে হলে কোন সমস্যা নেই, ব্যবহার করতে করতেই বুঝতে পারবেন এর ফজিলত। [এখান](http://docs.python-guide.org/en/latest/dev/virtualenvs/) থেকে জেনে নিন কিভাবে `virtualenv` ও `virtualenvwrapper`, এ দুটি টুলস ইন্সটল করবেন। তারপর আমাদের প্রোজেক্টের জন্য একটা ভার্চুয়াল এনভায়ারনমেন্ট তৈরী এবং চালু করে নিন:

{% highlight bash %}
mkvirtualenv project
workon project
{% endhighlight %}

ভার্চুয়াল এনভায়ারনমেন্ট নিয়ে যা কিছু জানার সবই উপরের লিংকটিতে পাবেন।

__সাবলাইম টেক্সট ৩__<br>
সবার উপরে সাবলাইম টেক্সট সত্য, তাহার উপরে কিছু নাই! কোডিং করে সাবলাইম টেক্সটের চেয়ে বেশি শান্তি আর কোন এডিটরে পেয়েছি বলে মনে পড়ে না আমার। আপনির এই জোশ এডিটরটা না থাকলে সরাসরি ওদের [সাইটে](https://www.sublimetext.com/3
) গিয়ে লেটেস্ট ভার্শন ইন্সটল করে নিন। একটা টিপস দেই: সাবলাইম টেক্সটের কিছু চমৎকার প্লাগিন আছে যেগুলো দিয়ে এডিটরটাকে পাইথন কোডিংয়ের জন্য আরও আরামদায়ক করে ফেলা যায়। ইচ্ছা করলে সেগুলো-ও [ঘেঁটে](https://dbader.org/blog/setting-up-sublime-text-for-python-development) দেখতে পারেন।


### ডেটার উৎস

একটা জিনিশ খেয়াল করে দেখেছেন? আপনার বন্ধুবান্ধব মোটামুটি সবাই-ই কিন্তু ঘুমাতে যাবার ঠিক আগমুহূর্ত পর্যন্ত ফেসবুকে থাকেন, আবার ঘুম থেকে উঠেই সবার আগে ওই ফেসবুকেই ঢোকেন! যদি অনুমান করতে হয় আমি বলব আপনিও এই কাজটি করে থাকেন :D অনেকটা এই ধারণা ব্যবহার করেই ২০১৬ এর ফেব্রুয়ারীর দিকে ড্যানিশ ডেভেলপার সরেন লুভ-ইয়ানসেন একটা [পরীক্ষা](https://medium.com/@sqrendk/how-you-can-use-facebook-to-track-your-friends-sleeping-habits-505ace7fffb6) চালান। তিনি একটি টুল বানান যা আপনার ফ্রেন্ডলিস্টের মানুষদের অনলাইন/অফলাইন হবার সময় থেকে বের করে ফেলতে পারবে সপ্তাহ জুড়ে তাদের ঘুমাবার অভ্যাস। দেখেই নিন না কিভাবে কাজ করে এই টুল-টি:

<iframe src="https://www.youtube.com/embed/wBNcP-LkpfA" frameborder="0" allowfullscreen="" width="600" height="500"></iframe><br>


সত্যি বলতে এই জিনিশটি দেখে আমার ভয়-ই লেগে গিয়েছিল। এই অ্যাপ যদি শিঁধেল চোরেরা পায় তাহলে তো তাদের পোয়াবারো! ;) কিন্তু প্রশ্ন হল, এইখানে কি এমন জাদু ব্যবহার করেছিলেন সরেন?

এই জাদুর ছোট্ট নাম হল API. পুরা নাম Application Programming Interface. এই টেকনোলজির উদ্দেশ্য হল এক অ্যাপ থেকে আরেক অ্যাপে একেবারে নির্ঝঞ্ঝাটে তথ্য আদান প্রদান করা। আপনার চোখে পড়ুক বা না-ই পড়ুক, API এর ব্যবহার সবখানেই। ডেটা যোগাড় করার বড় একটা উৎস বিভিন্ন সাইটের পাবলিক API. সরেন অবশ্যই ফেসবুকের API ব্যবহার করেছিলেন ফেসবুক, টুইটার, গুগল সবারই বেশ হৃষ্টপুস্ট API আছে যা ব্যবহার করে আপনি চোখের নিমেষে হাজার হাজার অতি প্রয়োজনীয় তথ্য নিয়ে আসতে পারেন আপনার হাতের মুঠোয়। এসব পরিচিত নাম ছাড়াও আর কি কি API আছে ব্যবহার করার মত তা জানার ভাল একটা সাইট [Programmable Web](http://www.programmableweb.com/)। ওখানে মোটামুটি ১৩ হাজারেরও বেশি API এর বর্ণনা দেয়া আছে।

[GitHub](http://github.com) হল ফেসবুকের মতই একটি সামাজিক সাইট, কিন্তু স্ট্যাটাস আর ছবি  আর নোটস শেয়ার করার বদলে সেখানে শেয়ার হয় কোড। এই টিউটোরিয়ালের জন্য আমরা গিটহাবের এর API নিয়ে পরীক্ষা-নিরীক্ষা করব। ওখানে অ্যাকাউন্ট না থাকলে এখনই তৈরী করে নিন, যাতে এই প্রোজেক্টের কোড-ও শেয়ার করে দিতে পারেন ওখানে। চিন্তার কোন কারণ নেই, আপনার কোড কেউ চুরি করে নেবে না :) যা সবার জন্যই উন্মুক্ত, তা চুরি করা কি শোভা পায়?


### API পরখ করা

কোন সাইটের API ব্যবহারের জন্য সবার আগে ঢুঁ মেরে দেখতে হয় সেটার ডকুমেন্টেশনে। গিটহাবের API এর ডকস আছে  [এখানে](https://developer.github.com/)। এই API-টির মজার ব্যাপার হল, শুধু একটা ব্রাউজার হলেই এটি ব্যবহার করা সম্ভব! উদাহরণ দেই: ব্রাউজারে নতুন ট্যাবে এই ঠিকানায় যান: _https://api.github.com/users/{username}_, username এর যায়গায় আপনার সদ্য তৈরী করা গিটহাব অ্যাকাউন্টের ইউজারনেম দিতে পারেন। আমি পাইথনের আব্বিজান গুইদো ভ্যান রসামের ইউজারনেম বসিয়ে দিলাম: [https://api.github.com/users/gvanrossum](https://api.github.com/users/gvanrossum)
যা পেলাম:

{% highlight json %}
{
    "login": "gvanrossum",
    "id": 2894642,
    "avatar_url": "https://avatars.githubusercontent.com/u/2894642?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/gvanrossum",
    "html_url": "https://github.com/gvanrossum",
    "type": "User",
    "site_admin": false,
    "name": "Guido van Rossum",
    "company": "Dropbox",
    "blog": "http://python.org/~guido/",
    "location": "San Francisco Bay Area",
    "email": "guido@python.org",
    "public_repos": 4,
    "public_gists": 5,
    "followers": 911,
    "following": 0,
    "created_at": "2012-11-26T18:46:40Z",
    "updated_at": "2015-12-23T18:35:37Z"
}
{% endhighlight %}

আপনিও এমনই কিছু একটা পাবেন। খেয়াল করলে দেখবেন যে এটা দেখতে হুবুহু পাইথনের ডিকশনারীর মতন! এখানে key-value pair হিসাবে বেশ কিছু তথ্য আছে গুইদোর অ্যাকাউন্ট নিয়ে: আমরা দেখতে পাচ্ছি তার `id`-টি কত, `avatar_url` এর [ঠিকানাটায়](https://avatars.githubusercontent.com/u/2894642?v=3) গেলে তার প্রোফাইল পিকচারটিও পাওয়া যাচ্ছে। আরও জানতে পারছি তিনি সান ফ্রান্সিসকো বে এরিয়ায় থাকেন এবং "guido@python.org" ঠিকানায় ইমেইল করে তার নাগাল পাওয়া সম্ভব।  আসলে তথ্যকে দেখানোর এই ফরমেটটাকে বলে [JSON](http://www.json.org) বা JavaScript Object Notation.  মোটামুটি জনপ্রিয় বেশিরভাগ web API-ই আপনাকে JSON ফরমেটে তথ্য প্রদান করবে, যা আমাদের জন্য পাইথনে প্রক্রিয়া করা বেশ সুবিধার। সেটা আমরা পরের ধাপে দেখব।

তো গিটহাব কিভাবে বুঝল আমরা গুইদোর প্রোফাইলের তথ্য চাই? কিংবা এটাই বা কিভাবে বুঝল কি কি তথ্য পাঠাতে হবে? কই, তার অ্যাকাউন্টের ইউজারনেমের সাথে পাসওয়ার্ডটা তো দিল না :P আসলে এখানে যা হচ্ছে তা হল:

- আপনার ব্রাউজার `api.github.com` ঠিকানাটায় গিয়ে কড়া নেড়েছে বা রিকোয়েস্ট করেছে
- কড়া নাড়বার সময়  `/users` র‍াউট দিয়ে গিটহাবকে জানিয়েছে আমাদের দরকার ইউজারদের তথ্য
- এবং সবশেষে `/gvanrossum` দিয়ে শুধু গুইদোর প্রোফাইলের তথ্য চেয়েছে

আপনার ব্রাইজারে কাঁটায় কাঁটায় একই তথ্য আসতে হবে এমন না। তবে যা দেখতে পাবেন ওই ঠিকানায় গেলে তার গঠন এমনই। কয়েকটা লাইন পড়লেই বুঝতে পারবেন যে গুইদো'র গিটহাব অ্যাকাউন্টের অনেক তথ্য পেয়ে গেছেন আপনি। তার অ্যাকাউন্টটি কবে তৈরী করা হয়েছিল, গিটহাবে কয়টি রেপোজিটরি বা পাবলিক প্রোজেক্ট আছে তার, এমন কি কতজন মানুষকে তিনি ফলো করছেন তাও এখন আমরা জেনে গেছি। খালি একটা লিংকে গিয়েই কিভাবে এত কিছু পেয়ে গেলেন তাহলে? এখানে যা হয়েছে তা হল-
- আপনার ব্রাউজার `api.github.com` ঠিকানাটায় গিয়ে কড়া নেড়েছে
- কড়া নাড়ার সময় বলে দিয়েছে, users যারা আছে তাদের মধ্যে `gvanrossum` ইউজারনেমের বান্দার তথ্য আমার চাই

আমাদের প্রোজেক্টের লক্ষ্য মনে আছে তো? আমরা চাই গিটহাবের কিছু ইউজারের মাঝে কে কত অ্যাক্টিভ সেটা জানতে চাই। আর সেটা জানতে তাদের অ্যাকাউন্টের রেপোজিটরির সংখ্যা এবং অ্যাকাউন্টের বয়স শুধু লাগবে আমাদের।


### তথ্য সংগ্রহ করা

গিটহাবের API এর সাথে প্রাথমিক পরিচয় তো হয়েই গেল, তাহলে এখন কিছু কোডিং করা যাক।


__কার তথ্য নেব?__<br>
এই প্রোজেক্টের জন্য আমরা গিটহাবে সবচেয়ে জনপ্রিয় ৫ জন পাইথন ডেভেলপারের তথ্য ব্যবহার করব। তাদের তৈরী করা টুলস এবং রিসোর্সেস আমার মত হাজারো পাইথনিয়ারের প্রতিদিনই কাজে আসে। তাদের প্রতি আমি সবসময়ই কৃতজ্ঞ :)

- [কেনেথ রিটজ](https://github.com/kennethreitz), [`requests`](http://docs.python-requests.org/en/master/) এর রচয়িতা, [Python Software Foundation](https://www.python.org/psf/
) এর ফেলো
- [আর্মিন রনেশার](https://github.com/mitsuhiko), [`flask`](http://flask.pocoo.org) প্রোজেক্টের লিড,
- [ইয়াকুব রজতোৎসিল](https://github.com/jkbrzt), [`httpie`](https://github.com/jkbrzt/httpie) টুলের নির্মাতা,
- [ভ্লাদিমির ইয়াকোভলেভ](https://github.com/nvbn), [`thefuck`](https://github.com/nvbn/thefuck) বানিয়েছেন,
- [ডন মার্টিন](https://github.com/donnemartin), ডেটা সাইন্সের জন্য পাইথন রিসোর্সের বিশাল [তালিকা](https://github.com/donnemartin/data-science-ipython-notebooks) মেইনটেইন করেন


কোডিং শুরু করা যাক। সবার প্রথমে একটি project.py ফাইল বানিয়ে এই লাইনগুলো লিখুন:

{% highlight python %}
baseurl = "https://api.github.com/users/"
users = ['kennethreitz', 'mitsuhiko', 'jkbrzt', 'nvbn', 'donnemartin']
properties = ['login', 'id', 'html_url', 'public_repos', 'created_at']
{% endhighlight %}

যে ইউজারনেমের তথ্যই আমরা আনতে চাই না কেন, গিটহাবের API এ রিকোয়েস্টটি করতে হবে _https://api.github.com/users/_ এ ঠিকানায়। উপরের কোডে সেটাই রাখলাম baseurl এ। অন্যদিকে, প্রতি ইউজারের জন্য আমাদের শুধু দুইটি তথ্য দরকার: পাবলিক রেপোজিটরি বা কোড প্রোজেক্টের সংখ্যা, এবং অ্যাকাউন্ট তৈরীর তারিখ।। এড়াছা ইউজারনেম, আইডি আর প্রোফাইলের অ্যাড্রেস রাখা যেতে পারে পরবর্তিতে ব্যবহারের জন্য। এসব তথ্যের key-গুলো রাখলাম properties লিস্টে।

__পরীক্ষা-নিরীক্ষা__<br>
পাইথন থেকে কোন ওয়েব রিকোয়েস্ট পাঠাতে `requests` মডিউলটি ব্যবহার হয়, সেটা ইন্সটল করে ফেলুন টার্মিনালে এ কমান্ড দিয়ে: `pip3 install requests`। আর সাথে project.py এর শুরুতে মডিউলটি ইম্পোর্ট করতে যোগ করুন: `import requests`। এই মডিউলটি বানিয়েছেন কেনেথ রিট্জ, তাই তাকে দিয়েই শুরু করব পরীক্ষা নিরীক্ষা। তার ইউজারনেম আছে `users[0]`-এ, তাই API দিয়ে তার তথ্য এক্সেস করতে পুরো ঠিকানা হবে `baseurl + users[0]`, বা "https://api.github.com/users/kennethreitz".

{% highlight python %}
current_user = baseurl + users[0]
response = requests.get(current_user)
user_info = response.json()
print(user_info)
{% endhighlight %}

এখানে, কেনেথের API url-টায় HTTP GET request করলাম requests.get() ফাংশন দিয়ে। রিকোয়েস্টের জবাবে যা পেলাম, সেটা প্রিন্ট করলে "<Response [200]>" এমন কিছু একটা পাব, কারণ এটি একটি অবজেক্ট। এই অবজেক্টে বেশ গুরুত্বপূর্ণ তথ্য থাকে, কিন্তু আপাতত আমরা শুধু JSON ফরমেটে ডেটা-টা দেখতে আগ্রহী। তাই response.json() দিয়ে আশানুরুপ key-value pair টার্মিনালে প্রিন্ট করলাম।

এভাবে একসাথে হ-জ-ব-র-ল ভাবে তথ্য পেলে আমাদের কোন কাজেই আসবে না। তাই হালকা পাতলা প্রক্রিয়াজাতকরণ করা যাক response-টাকে। প্রতি ইউজারের জন্য সবগুলো প্রোপার্টি প্রিন্ট করতে for loop ইস্তেমাল করা যাক:

{% highlight python %}
for username in users:
    current_user = baseurl + username
    response = requests.get(current_user)
    user_info = response.json()
    for property in properties:
        print("{} : {}".format(property, user_info[property]))
        print('')
{% endhighlight %}

এ পর্যন্ত যা যা করলেন তার সব মিলিয়ে এমনটা হবে:
<script src="https://gist.github.com/mnzr/30fbd4e6fd3177a53f83.js"></script>



### তথ্য বিশ্লেষণ

এ পর্যন্ত যতটুকু কোড করা হয়েছে, তা টার্মিনালে রান করলে  এভাবে ইউজারদের তথ্য দেখানোর কথা:
{% highlight none %}
name: Kenneth Reitz
id: 119893
html_url: https://github.com/kennethreitz
public_repos: 87
created_at: 2009-08-26T21:17:47Z
{% endhighlight %}

এই প্রোজেক্টে আমরা linear regression analysis করব দুইটি ভেরিয়েবল ব্যবহার করে: অ্যাকাউন্টের বয়স, যা একটি independent variable, এবং মোট রেপোজিটরি, যা অ্যাকাউন্টের বয়সের ওপর নির্ভরশীল।


আমি বলতে ভুলে গিয়েছিলাম, ডেটা সাইন্টিস্টদের অনেক সময় ডিটেক্টিভদের মতন চিন্তা করতে হয় :D শার্লক হোমস যেমন কেউকে অবজার্ভ করেই deduction এর মাধ্যমে অনেক কিছু জেনে যেতেন, তেমনি টার্মিনালের তথ্যগুলোও আমাদের পর্যবেক্ষণ করতে হবে। লক্ষ্য করলে দেখতে পাবেন:

* আর্মিন সবার আগে অ্যাকাউন্ট তৈরী করেছে (২০০৮ সালে)
* সবচেয়ে কম প্রোজেক্ট আছে ডনের (২৫টি প্রোজেক্ট)
* প্রোজেক্ট করার হার সবচেয়ে কম ইয়াকুবের (বছর প্রতি ৭টি)

এই প্রোজেক্টে আমরা দুটি ভেরিয়েবল ব্যবহার করে অ্যানালাইসিস করব:


শেষ পয়েন্টটা বের করতে একটু কারসাজী করতে হয়েছে। আমরা যে তথ্য পেয়েছি, সেখানে শুধু অ্যাকাউন্ট তৈরীর তারিখ দেয়া আছে। অথচ বছর প্রতি প্রোজেক্টের হার বের করতে আমাদের দরকার অ্যাকাউন্টের বয়স, কারণ কমন সেন্স:
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
   <mi> repo per year </mi>
   <mo>=</mo>
   <mo> ( </mo>
   <mfrac linethickness="1">
      <mi> total number of repos </mi>
      <mi> age of the account </mi>
   </mfrac>
   <mo> ) </mo>
</mrow>
</math>

এই ফর্মুলা থেকে বোঝা যাচ্ছে যে আমাদের গ্রাফের অক্ষ হিসাবে

সত্যি বলতে কি, এতটুকুই আমাদের প্রোজেক্টের অ্যানালাইসিস। ডেটা সেট হিসাবে মাত্র পাঁচজন কোডারের গিটহাবের তথ্য খুবই সামান্য। এছাড়া আমাদের রিকোয়্যারমেন্ট-ও ছিল সিম্পল: অ্যাকাউন্ট তৈরীর পর থেকে আজ পর্যন্ত  কে সবচেয়ে বেশি অ্যাক্টিভ ছিল তা বের করা। কোডিংয়ের মাধ্যমে আমরা আরও কয়েক ধাপ নতুন তথ্য পেতে পারি, যেমন, কে কার চেয়ে কত শতাংশ বেশি অ্যাক্টিভ ছিল ইত্যাদি। ডেটার পরিমাণ এবং প্রয়োজনীয়তার ওপর ভিত্তি করে বিভিন্ন টেকনিক, যেমন clustering, classification, regression এবং টেকনলজি ব্যবহার করা হয়ে থাকে। আপাতত আমরা শুধু অ্যাকাউন্টের বয়স হিসাবে প্রোজেক্টের সংখ্যা নিয়েই গ্রাফে বসিয়ে ভিজুয়ালাইজ করব।

এবার এইটাকে গ্রাফে তুলতে পারলে

আমাদের মূল লক্ষ্য ছিল অ্যাকাউন্টের বয়সের তুলনায় কার কতগুলো প্রোজেক্ট আছে তার গ্রাফ বানানো, X-axis বরাবর থাকবে রেপোজিটরির সংখ্যা আর Y-axis বরাবর বয়স। API থেকে পাওয়া তথ্য দেখে আমরা বলেই দিতে পারছি কে কবে তৈরী করেছে অ্যাকাউন্ট, কিন্তু কম্পিউটার তো আর সেটা পারে না। `created_at` এর মানগুলো খেয়াল করলে দেখবেন তারিখ এবং সময়ে দুটোই একসাথে একটা স্ট্রিং হিসাবে পাচ্ছি আমরা। এই স্ট্রিংটাকে পাইথনের বিল্টিন datetime ফরমেটে নিলে  তারিখ এবং সাল আলাদা করা যাবে। এরকম স্ট্রিং থেকে তারিখ বের করতে `dateutil` মডিউল থেকে তারিখের parser.parse() ব্যবহার করা হয়। সাল বের করার পর বর্তমান সাল থেকে বিয়োগ করে অ্যাকাউন্টের বয়স বের করা তো মামুলি ব্যাপার, ক্লাস টু এর বাচ্চাও বলে দিতে পারবে। বর্তমান সাল পাওয়া যাবে `datetime.date` মডিউলের ‍ `today()` ফাংশনটায়।

সবার আগে মডিউলগুলো যোগ করুন কোডের শুরুতে:‌
{% highlight python %}
import dateutil
from datetime.date import today
{% endhighlight %}

`users` এর লুপ শুরুর আগে বর্তমান তারিখ জমা রাখুন:
{% highlight python %}
now = today()
{% endhighlight %}

তারপর `properties` এর লুপটার পর `created_at` এর পার্সিং এবং বয়স বের করুন:
{% highlight python %}
date = dateutil.parser.parse(user_info["created_at"])
age = (now.year - creation_date.year)
print("age: {}".format(age))

{% endhighlight %}

এবার কোড রান করলে প্রতিটা ইউজারের তথ্যের শেষে  `age` দেখা যাবে এভাবে:
{% highlight none %}
name: Kenneth Reitz
id: 119893
html_url: https://github.com/kennethreitz
public_repos: 87
created_at: 2009-08-26T21:17:47Z
age: 7
{% endhighlight %}

এ পর্যন্ত করা হয়ে গেলে গ্রাফ করার জন্য যা যা দরকার ছিল তথ্য, সবই আমাদের বের করা হয়ে গেছে। কেনেথ, আর্মিন আর ইয়াকুবের মোট পাবলিক রেপোজিটরি যথাক্রমে ৮৭টি, ১৪৩টি এবং ৪৩টি। এগুলো X-axis এর মান। অন্য দিকে তাদের অ্যাকাউন্টের বয়স যথাক্রমে ৭ বছর, ৮ বছর এবং ৬ বছর। এগুলো আমাদের গ্রাফের Y-axis এর মান। এখন শুধু বাকি [ডেটা ভিজুয়ালাইজেশন (পর্ব ৪)]({{ site.url }}/datasci-intro-4-bn) এ গ্রাফটা বানানো! এ পর্বের সম্পূর্ণ কোড এখানে:

<script src="https://gist.github.com/mnzr/0aa974967ded413f3a0213078620b741.js"></script>
